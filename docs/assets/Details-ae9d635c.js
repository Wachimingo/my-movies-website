import{b as y,r as t,j as s,P as $,M as k,c as w,D as d,d as S,L as m,S as _,a as b}from"./index-641ae2ae.js";import{b as v,a as h}from"./constants-6702d813.js";const M="_marked_wgyae_16",I="_pill_wgyae_20",N="_recommendations_wgyae_32",l={"page-body":"_page-body_wgyae_1","favorite-btn":"_favorite-btn_wgyae_5",marked:M,pill:I,recommendations:N},D=()=>{const{id:a}=y(),[c,p]=t.useState(void 0),[o,j]=t.useState(void 0),[r,x]=t.useState(!1),[i,u]=t.useState(void 0);t.useEffect(()=>{fetch(`${v}/movie/${a}?api_key=${h}`).then(e=>e.json()).then(e=>{p(e),x(localStorage.getItem(`movie-${e.id}`)===null)}),fetch(`${v}/movie/${a}/credits?api_key=${h}`).then(e=>e.json()).then(e=>j(e.cast)),fetch(`${v}/movie/${a}/recommendations?api_key=${h}`).then(e=>e.json()).then(e=>u(e.results))},[a]);const f=e=>{if(r){const n={id:e.id,title:e.title,poster_path:e.poster_path,release_date:e.release_date,overview:e.overview,vote_average:e.vote_average};localStorage.setItem(`movie-${e.id}`,JSON.stringify(n)),location.reload()}else localStorage.removeItem(`movie-${e.id}`),location.reload()};return s.jsxs($,{children:[s.jsx(k,{children:c?s.jsx(w,{movie:c,children:s.jsxs(d,{row:!0,fit:!0,className:`${l["favorite-btn"]} ${l[r?"":"marked"]}`,role:"button",onClick:()=>f(c),children:[s.jsx(S,{color:r?"yellow":"black"})," ",r?"Mark as favorite":"Remove from favorites"]})}):s.jsx(m,{})}),s.jsxs(_,{children:[s.jsx("h2",{children:"Cast"}),o?s.jsx(d,{row:!0,children:o==null?void 0:o.map(e=>s.jsx("div",{className:l.pill,children:e.name},e.name))}):s.jsx(m,{})]}),s.jsxs(_,{children:[s.jsx("h2",{children:"Recommendations:"}),i?s.jsx(d,{row:!0,space:"around",children:i==null?void 0:i.map(({id:e,title:n,poster_path:g})=>s.jsx(b,{className:l.recommendations,movie:{id:e,title:n,poster_path:g}},n+e))}):s.jsx(m,{})]})]})};export{D as Details,D as default};
