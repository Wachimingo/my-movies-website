import{r as t,_ as n,u as h,j as e,P as w,M as f,S as g}from"./index-b5b28e23.js";const x=t.lazy(()=>n(()=>import("./Form-c13cfe68.js"),["assets/Form-c13cfe68.js","assets/index-b5b28e23.js","assets/index-e2c3046c.css","assets/form.module-08abe118.js","assets/form-142297d0.css"])),i=t.lazy(()=>n(()=>import("./Input-3658b82c.js"),["assets/Input-3658b82c.js","assets/index-b5b28e23.js","assets/index-e2c3046c.css","assets/form.module-08abe118.js","assets/form-142297d0.css"])),j=()=>{const s=h(),[r,l]=t.useState(""),[c,d]=t.useState(""),m=/[\w-]+@([\w-]+\.)+[\w-]+/;t.useEffect(()=>{localStorage.getItem("token")!==null&&s("/home")},[s]);const p=async a=>{a.preventDefault();try{if(!m.test(r))throw Error("Invalid email format");const o=await fetch("https://reqres.in/api/login",{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({email:r,password:c})});if(!o.ok)throw Error("Incorrect email or password, please try again.");const u=await o.json();localStorage.setItem("token",u.token),s("/home")}catch(o){window.alert(o)}};return e.jsxs(w,{children:[e.jsx(f,{children:e.jsx("h1",{children:"My movies website"})}),e.jsxs(g,{children:[e.jsx("h2",{children:"Login"}),e.jsxs(x,{id:"login-form",onSubmit:a=>p(a),children:[e.jsx(i,{type:"text",id:"email",fieldName:"Email",action:l,required:!0}),e.jsx(i,{type:"password",id:"password",fieldName:"Password",action:d,min:"6",required:!0})]})]})]})};export{j as Login,j as default};
