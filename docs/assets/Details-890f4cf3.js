import{b as k,r as t,j as s,P as g,M as S,c as b,D as d,d as y,L as m,S as _,a as M}from"./index-71e2cb00.js";import{b as v,a as h}from"./constants-6702d813.js";const w="_marked_z83fn_16",z="_pill_z83fn_20",I="_recommendations_z83fn_32",l={"page-body":"_page-body_z83fn_1","favorite-btn":"_favorite-btn_z83fn_5",marked:w,pill:z,recommendations:I},C=()=>{const{id:a}=k(),[c,f]=t.useState(void 0),[o,j]=t.useState(void 0),[r,p]=t.useState(!1),[n,x]=t.useState(void 0);t.useEffect(()=>{fetch(`${v}/movie/${a}?api_key=${h}`).then(e=>e.json()).then(e=>{f(e),p(localStorage.getItem(`movie-${e.id}`)===null)}),fetch(`${v}/movie/${a}/credits?api_key=${h}`).then(e=>e.json()).then(e=>j(e.cast)),fetch(`${v}/movie/${a}/recommendations?api_key=${h}`).then(e=>e.json()).then(e=>x(e.results))},[a]);const u=e=>{if(r){const i={id:e.id,title:e.title,poster_path:e.poster_path,release_date:e.release_date,overview:e.overview,vote_average:e.vote_average};localStorage.setItem(`movie-${e.id}`,JSON.stringify(i)),location.reload()}else localStorage.removeItem(`movie-${e.id}`),location.reload()};return s.jsxs(g,{children:[s.jsx(S,{children:c?s.jsx(b,{movie:c,children:s.jsxs(d,{row:!0,fit:!0,className:`${l["favorite-btn"]} ${l[r?"":"marked"]}`,role:"button",onClick:()=>u(c),children:[s.jsx(y,{color:r?"yellow":"black"})," ",r?"Mark as favorite":"Remove from favorites"]})}):s.jsx(m,{})}),s.jsxs(_,{children:[s.jsx("h2",{children:"Cast"}),o?s.jsx(d,{row:!0,children:o==null?void 0:o.map(e=>s.jsx("div",{className:l.pill,children:e.name},e.name))}):s.jsx(m,{})]}),s.jsxs(_,{children:[s.jsx("h2",{children:"Recommendations:"}),n?s.jsx(d,{row:!0,children:n==null?void 0:n.map(({id:e,title:i,poster_path:$})=>s.jsx(M,{className:l.recommendations,movie:{id:e,title:i,poster_path:$}},i+e))}):s.jsx(m,{})]})]})};export{C as Details,C as default};
